<!DOCTYPE html>
<html>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<body>
<div class="container pt-5 pb-5 ">
<canvas id="myChart" style="width:100%;max-width:1000px"></canvas>
</div> 
<script>
  const statistiques = ()=>{
    axios.get('/api/occupations').then(response => {            
const salles = response.data;
var list = salles.api;
var occcupations = salles.time;
var Colors = ["red", "green","blue","orange","brown"];
new Chart("myChart", {
  type: "bar",
  data: {
    labels:list,
    datasets: [{
      backgroundColor: Colors,
      data: occcupations
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "Statistiques des occupations"
    }
  }
});
}).catch(error => console.error(error));
}
statistiques();
</script>
<script>
  const socket = new WebSocket('wss://bloc-salle-app.herokuapp.com');
   socket.addEventListener('open', function (event) {
   })
    socket.addEventListener('message', function (event) {
      console.log("ok")
    statistiques();
    })
 </script> 
</body>
</html>
